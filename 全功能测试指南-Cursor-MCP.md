# AimLab射击训练竞技系统 - Cursor + MCP 全功能测试指南

## 项目概述
AimLab是一个完整的射击训练竞技系统，包含用户认证、运动员管理、训练管理、比赛管理和实时WebSocket通信等核心功能。

## 测试环境要求
- 后端：Spring Boot 应用运行在 http://localhost:8083
- 前端：Vue.js 应用运行在前端开发服务器
- 数据库：MySQL (根据 schema.sql 配置)
- 浏览器：支持WebSocket的现代浏览器

---

## 第一阶段：系统启动与基础验证

### 步骤 1: 启动系统服务
```
请帮我启动AimLab项目的前后端服务。检查以下内容：
1. 后端Spring Boot服务是否正常启动（端口8083）
2. 前端Vue.js开发服务器是否启动
3. 数据库连接是否正常
4. 检查关键配置文件（application.yml, package.json）
5. 验证API文档是否可访问（Swagger/Knife4j）

如果发现任何启动问题，请分析并修复。
```

### 步骤 2: 健康检查与API可用性
```
使用MCP工具测试系统基础功能：
1. 访问后端健康检查端点 GET /api/auth/test
2. 检查前端页面是否能正常访问
3. 验证静态资源加载
4. 检查浏览器开发者工具中是否有错误信息

请使用浏览器自动化工具进行这些检查。
```

---

## 第二阶段：用户认证系统测试

### 步骤 3: 用户注册功能测试
```
使用浏览器自动化测试用户注册流程：
1. 导航到注册页面
2. 测试用户注册API POST /api/auth/register
   - 正常注册：username="test_user_" + 时间戳, password="test123"
   - 异常情况：空用户名、重复用户名、弱密码
3. 验证注册响应数据结构
4. 检查数据库中用户记录是否正确创建

请捕获所有API响应并验证其格式是否符合预期。
```

### 步骤 4: 用户登录功能测试
```
测试用户登录功能：
1. 使用已注册用户进行登录 POST /api/auth/login
   - 正确凭据：username="test", password="test123"
   - 错误凭据测试
2. 验证返回的token信息是否完整
3. 测试token是否被正确存储到localStorage
4. 验证登录状态在前端的正确显示

请确保token验证机制正常工作。
```

---

## 第三阶段：运动员档案管理测试

### 步骤 5: 运动员档案创建
```
测试运动员档案管理功能：
1. 确保用户已登录状态
2. 测试创建运动员档案 POST /api/athletes/profile
   - 必填信息：姓名、性别、出生日期、级别
   - 数据验证：无效日期、空姓名等异常情况
3. 验证档案创建后的数据库记录
4. 测试获取当前用户档案 GET /api/athletes/profile

请验证所有响应数据的完整性和正确性。
```

### 步骤 6: 档案更新与查询
```
测试档案更新功能：
1. 更新运动员档案信息 PUT /api/athletes/profile
2. 测试根据ID获取运动员信息 GET /api/athletes/{id}
3. 获取完整个人资料 GET /api/athletes/my-profile（包含历史记录和统计）
4. 验证权限控制：只能访问自己的档案

确保数据更新的一致性和权限验证的正确性。
```

---

## 第四阶段：训练管理系统测试

### 步骤 7: 训练场次管理
```
完整测试训练功能：
1. 开始新训练场次 POST /api/training/sessions/start
   - 设置训练名称和描述
2. 获取训练场次列表 GET /api/training/sessions
3. 查看训练场次详情 GET /api/training/sessions/{id}
4. 测试前端训练页面的交互功能

使用浏览器自动化验证UI交互的正确性。
```

### 步骤 8: 射击记录功能
```
测试射击记录系统：
1. 在训练场次中添加射击记录 POST /api/training/records
   - 测试不同坐标和得分的记录
   - 验证数据格式：x, y坐标 (0-1), 得分计算
2. 获取训练记录 GET /api/training/sessions/{id}/records
3. 使用前端射击靶组件进行交互测试
4. 验证实时统计数据更新（总分、平均分、最高分等）

确保射击记录的准确性和统计计算的正确性。
```

### 步骤 9: 训练报告生成
```
测试训练报告功能：
1. 结束训练场次 POST /api/training/sessions/{id}/end
2. 获取训练报告 GET /api/training/sessions/{id}/report
3. 下载PDF报告 GET /api/training/sessions/{id}/report/pdf
4. 验证PDF文件的完整性和内容准确性

检查报告中的统计数据是否与实际记录匹配。
```

---

## 第五阶段：比赛管理系统测试

### 步骤 10: 比赛创建与管理
```
测试完整的比赛生命周期：
1. 创建比赛 POST /api/competitions
   - 设置比赛参数：轮数、每轮射击数、时间限制
2. 获取比赛列表 GET /api/competitions
3. 查看比赛详情 GET /api/competitions/{id}
4. 测试比赛状态管理：
   - 开始比赛 POST /api/competitions/{id}/start
   - 暂停比赛 POST /api/competitions/{id}/pause
   - 恢复比赛 POST /api/competitions/{id}/resume
   - 完成比赛 POST /api/competitions/{id}/complete

验证每个状态转换的正确性和业务逻辑。
```

### 步骤 11: 比赛报名与参与
```
测试比赛报名流程：
1. 运动员报名参赛 POST /api/competitions/{id}/enroll
2. 查看参赛运动员 GET /api/competitions/{id}/athletes
3. 取消报名 DELETE /api/competitions/{id}/enroll
4. 测试前端比赛页面的参与功能

使用浏览器自动化模拟多用户报名场景。
```

### 步骤 12: 比赛实时功能
```
测试比赛实时排名和WebSocket功能：
1. 获取实时排名 GET /api/competitions/{id}/rankings
2. 在比赛中提交射击记录
3. 验证WebSocket连接和实时数据推送
4. 测试多用户同时参赛的排名更新

这需要模拟多个浏览器标签或用户会话。
```

---

## 第六阶段：WebSocket实时通信测试

### 步骤 13: WebSocket连接测试
```
深度测试WebSocket实时功能：
1. 建立WebSocket连接到 ws://localhost:8083/ws
2. 测试连接认证和订阅机制
3. 验证实时消息推送：
   - 射击记录更新
   - 排名变化
   - 比赛状态变更
4. 测试连接断开和重连机制

使用开发者工具监控WebSocket消息流。
```

### 步骤 14: 多用户实时交互
```
模拟多用户实时比赛场景：
1. 开启多个浏览器标签或会话
2. 同时参与同一场比赛
3. 验证实时排名更新的准确性
4. 测试并发射击记录处理
5. 验证数据一致性

确保多用户环境下系统的稳定性和数据准确性。
```

---

## 第七阶段：报告系统与文件下载测试

### 步骤 15: PDF报告生成测试
```
全面测试报告生成功能：
1. 训练报告PDF下载测试
2. 比赛结果PDF下载 GET /api/competitions/{id}/results/pdf
3. 验证PDF文件内容：
   - 格式正确性
   - 数据准确性
   - 图表和统计信息
4. 测试大量数据的报告生成性能

检查生成的PDF文件是否包含完整和准确的信息。
```

---

## 第八阶段：综合性能与压力测试

### 步骤 16: API性能测试
```
进行系统性能测试：
1. 批量创建测试数据（用户、比赛、记录）
2. 并发API请求测试
3. 数据库查询性能验证
4. 内存和CPU使用率监控
5. WebSocket并发连接测试

使用压力测试工具验证系统在高负载下的表现。
```

### 步骤 17: 前端性能与用户体验
```
测试前端性能：
1. 页面加载速度测试
2. JavaScript执行性能
3. 大量数据渲染测试（排行榜、记录列表）
4. 移动设备兼容性测试
5. 网络条件变化下的用户体验

使用浏览器性能工具进行详细分析。
```

---

## 第九阶段：错误处理与边界条件测试

### 步骤 18: 异常情况处理
```
测试系统的错误处理机制：
1. 网络中断情况下的应用行为
2. 无效数据输入的处理
3. 权限验证失败的处理
4. 数据库连接异常的恢复
5. WebSocket连接中断和重连

验证系统在异常情况下的稳定性和用户体验。
```

### 步骤 19: 数据一致性验证
```
全面验证数据一致性：
1. 跨表数据关联的准确性
2. 统计计算的正确性
3. 并发操作的数据一致性
4. 缓存与数据库的同步
5. 分布式事务的处理

确保系统数据的完整性和准确性。
```

---

## 第十阶段：安全性与权限测试

### 步骤 20: 安全性验证
```
测试系统安全性：
1. SQL注入攻击防护
2. XSS攻击防护
3. CSRF防护机制
4. 权限控制验证
5. 敏感数据保护（密码、token）

使用安全测试工具进行漏洞扫描。
```

---

## 测试执行建议

### 自动化测试脚本示例
```javascript
// 使用 Cursor + MCP 自动化测试的示例脚本结构
const testSuite = {
    // 1. 系统启动验证
    systemStartup: () => {
        // 检查服务状态
        // 验证数据库连接
        // 确认API可用性
    },
    
    // 2. 用户认证测试
    authentication: () => {
        // 注册新用户
        // 登录验证
        // Token管理
    },
    
    // 3. 核心功能测试
    coreFeatures: () => {
        // 训练管理
        // 比赛管理
        // 实时通信
    },
    
    // 4. 性能与稳定性测试
    performance: () => {
        // 负载测试
        // 并发测试
        // 内存泄漏检测
    }
};
```

### 测试数据管理
- 为每个测试阶段准备独立的测试数据
- 实施数据清理和重置机制
- 使用种子数据确保测试的可重复性

### 监控和日志
- 启用详细的应用日志记录
- 监控系统资源使用情况
- 记录所有API响应时间和错误

### 报告生成
- 为每个测试阶段生成详细报告
- 包含测试覆盖率统计
- 提供性能基准数据
- 记录发现的问题和修复建议

---

## 总结

此测试指南涵盖了AimLab射击训练竞技系统的所有核心功能模块，通过系统性的测试步骤确保：

1. **功能完整性**：所有业务功能正常工作
2. **性能可靠性**：系统在正常和高负载下的稳定表现
3. **数据准确性**：计算和统计的正确性
4. **用户体验**：界面交互的流畅性和直观性
5. **安全性**：权限控制和数据保护的有效性

使用Cursor + MCP工具执行这些测试将提供全面的质量保证，确保系统达到生产环境的标准。
